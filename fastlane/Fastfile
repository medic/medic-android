# This file contains the fastlane.tools configuration
# You can find the documentation at https://docs.fastlane.tools
#

default_platform(:android)

platform :android do
  desc "Build and deploy on Google Play"
  lane :deploy do |options|
    gradleTaskName = "assemble#{options[:flavor]}Release"
    version = ENV['TRAVIS_TAG'].empty? ? 'SNAPSHOT' : ENV['TRAVIS_TAG']
    package_name = options[:flavor] == 'unbranded' ? "org.medicmobile.webapp.mobile" : "org.medicmobile.webapp.mobile.#{options[:flavor]}"

    gradle(task: gradleTaskName)
  end
end
